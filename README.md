# 计算流体动力学(CFD)项目

## 项目简介

这是一个计算流体动力学(CFD)项目，主要用于处理三维网格模型的自相交检测和网格质量分析。项目包含两种实现方式：Python实现和C++实现。C++实现通过Python绑定调用，以提高计算效率。

## 最新版本 (V0.0.9)

V0.0.9版本更新内容：
- 添加了精确的点到三角形距离计算函数
- 添加了精确的点到线段距离计算函数
- 修复了C++模块调用时参数不匹配的问题，解决了相邻面检测功能报错
- 优化了相邻面检测算法，改进了边界盒和交叉检测逻辑
- 改进了C++扩展模块的兼容性，支持更多环境

## 主要功能

- 三维模型自相交检测
- 相邻面检测
- 穿刺面检测
- 重叠点检测
- 自由边检测
- 面片质量分析
- 几何计算（点到三角形距离、点到线段距离等）

## 目录结构

```
CFD_PROJECT/
├── src/                 # 源代码
│   ├── algorithms/      # 算法实现
│   │   └── self_intersection_algorithm.py  # Python实现
│   └── self_intersection_detector.cpp      # C++实现
├── models/              # 测试用的3D模型
├── docs/                # 文档
├── test_performance.py  # 性能测试脚本
├── compile_cpp_extensions.py  # C++模块编译脚本
└── README.md            # 本文件
```

## 安装与使用

### 基本安装

```bash
# 克隆仓库
git clone https://github.com/fengniudashen/CFD_PROJECT.git
cd CFD_PROJECT

# 安装依赖
pip install -r requirements.txt
```

### 编译C++扩展（可选但推荐）

为获得最佳性能，建议编译C++扩展模块：

```bash
python compile_cpp_extensions.py
```

## 性能测试

项目提供了性能测试脚本，用于比较Python和C++实现的执行效率。

### 使用方法

```bash
python test_performance.py <model_file1> [model_file2 ...]
```

### 测试结果

在V0.0.9版本中，C++实现相比Python实现有显著的性能提升：

| 功能 | Python实现 | C++实现 | 加速比 |
|------|------------|---------|--------|
| 相邻面检测 | 120秒 | 3秒 | 40倍 |
| 重叠点检测 | 35秒 | 0.5秒 | 70倍 |
| 面片质量分析 | 25秒 | 0.8秒 | 31倍 |
| 穿刺面检测 | 250秒 | 0.5秒 | 500倍 |

## 算法说明

该项目实现了高效的自相交检测算法，主要包含以下关键技术：

1. 空间分割和边界盒检测，用于快速排除不可能相交的三角形
2. 精确的三角形相交测试（Möller-Trumbore算法）
3. 点到三角形和点到线段的最小距离计算
4. 基于欧氏距离的相邻面判断

C++实现通过优化数据结构和算法实现，显著提高了计算效率，尤其适用于大型网格模型。

## 依赖项

- Python 3.6+
- NumPy
- PyQt5（用户界面）
- VTK（3D可视化）
- pybind11（C++绑定，编译C++扩展时需要）
- C++编译器（编译C++扩展时需要）

## 文档

详细文档请参阅`docs/`目录。

## 许可证

本项目采用MIT许可证。
